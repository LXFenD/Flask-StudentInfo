var urls="";function MySelf(){this.change=$(".change"),this.input_change=$("#input-change"),this.span_value=this.input_change.text(),this.span_add=$('<span id="input-change"></span>'),this.input_add=$('<input style="border-radius: 5px;border: 1px solid #32AAEE; padding-left: 3px"/>'),this.is_add=!0,this.add_value="",this.img_click=$(".info-img img"),this.input_file=$('.info-img input[name="upimg"]'),this.btn_load=$(".btn-load"),this.is_show=!0,this.ueditor=$('<script id="container" name="content" type="text/plain"><\/script>')}MySelf.prototype.ListenChangeEvent=function(){var e=this;e.change.click(function(){if(e.is_add)e.input_change.remove(),e.span_add&&e.span_add.remove(),e.input_add.insertAfter(".famingyan"),e.input_add.val(e.span_value),$(this).text("确定修改"),e.is_add=!1;else{var n=$(this).parent().children("input");n&&stu_ajax.get({url:"/cms/myself/",data:{value:n.val()},success:function(t){console.log(t.data.value),e.add_value=t.data.value,n.remove(),e.span_add.insertAfter(".famingyan"),e.span_add.text(e.add_value),e.is_add=!0}}),$(this).text("更改")}})},MySelf.prototype.ListenClickUpoloadImageEvent=function(){var e=this;e.img_click.click(function(){e.input_file.click()}),e.input_file.change(function(){var t=this.files[0];console.log(t);var n=new FormData;n.append("file",t),stu_ajax.post({url:"/cms/upload_file/",data:n,processData:!1,contentType:!1,success:function(t){url_to=t.data.url,e.img_click.attr("src",url_to)}})})},MySelf.prototype.ListenClickUpoloadImageEvent_QiNiu=function(){var o=this;o.img_click.click(function(){o.input_file.click()}),o.input_file.change(function(){var a=this.files[0],t=new FormData;t.append("file",a),stu_ajax.post({url:"/cms/upload_qiniu/",data:t,processData:!1,contentType:!1,success:function(t){urls=t.data.url;var n={useCdnDomain:!0,retryCount:6,region:qiniu.region.z0},e={fname:t.data.filename,params:{},mimeType:["image/png","image/jpeg","image/gif","image/jpg"]},i=qiniu.upload(a,t.data.filename,t.data.token,e,n);swal({title:"确定使用这个头像吗？",text:"不好看还可以在设置",type:"warning",animation:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#667434",confirmButtonText:"确定设置",cancelButtonText:"算了！！",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){stu_ajax.get({url:"/cms/upload_qiniu/",data:{is_save:!0,url:urls},success:function(){i.subscribe({next:o.qiniu_next,error:o.qiniu_error,complete:o.qiniu_com}),swal("已经设置！","你的头像已经被设置。","success")}})})}})})},MySelf.prototype.qiniu_next=function(t){},MySelf.prototype.qiniu_error=function(t){console.log(t.message)},MySelf.prototype.qiniu_com=function(t){$(".info-img img").attr("src",urls)},MySelf.prototype.ListenClickLoadSaveEvent=function(){var t=this,n=$(".info-text"),e=n.html();t.btn_load.click(function(){t.is_show?(n.text(""),n.append(t.ueditor),t.ueditor.text(e),t.ue=UE.getEditor("container",{serverUrl:"/cms/editor/"}),t.is_show=!1):(n.children(t.ueditor).remove(),n.append(t.ue.getContent()),stu_ajax.get({url:"/cms/up_detail/",data:{detail:t.ue.getContent()},success:function(t){200==t.code&&window.location.reload()}}),window.location.reload(),t.is_show=!0)})},$(function(){var t=new MySelf;t.ListenChangeEvent(),t.ListenClickLoadSaveEvent(),t.ListenClickUpoloadImageEvent_QiNiu()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15c2VsZi5qcyJdLCJuYW1lcyI6WyJ1cmxzIiwiTXlTZWxmIiwidGhpcyIsImNoYW5nZSIsIiQiLCJpbnB1dF9jaGFuZ2UiLCJzcGFuX3ZhbHVlIiwidGV4dCIsInNwYW5fYWRkIiwiaW5wdXRfYWRkIiwiaXNfYWRkIiwiYWRkX3ZhbHVlIiwiaW1nX2NsaWNrIiwiaW5wdXRfZmlsZSIsImJ0bl9sb2FkIiwiaXNfc2hvdyIsInVlZGl0b3IiLCJwcm90b3R5cGUiLCJMaXN0ZW5DaGFuZ2VFdmVudCIsInNlbGYiLCJjbGljayIsInJlbW92ZSIsImluc2VydEFmdGVyIiwidmFsIiwiaW5wdXRfcyIsInBhcmVudCIsImNoaWxkcmVuIiwic3R1X2FqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwidmFsdWUiLCJzdWNjZXNzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsIkxpc3RlbkNsaWNrVXBvbG9hZEltYWdlRXZlbnQiLCJmaWxlcyIsImZvcm1kYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInVybF90byIsImF0dHIiLCJMaXN0ZW5DbGlja1Vwb2xvYWRJbWFnZUV2ZW50X1FpTml1IiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJvYnNlcnZhYmxlIiwidXBsb2FkIiwic3dhbCIsInRpdGxlIiwidHlwZSIsImFuaW1hdGlvbiIsInNob3dDYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uQ29sb3IiLCJjYW5jZWxCdXR0b25Db2xvciIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2FuY2VsQnV0dG9uVGV4dCIsImNvbmZpcm1CdXR0b25DbGFzcyIsImNhbmNlbEJ1dHRvbkNsYXNzIiwiYnV0dG9uc1N0eWxpbmciLCJ0aGVuIiwiaXNfc2F2ZSIsInN1YnNjcmliZSIsIm5leHQiLCJxaW5pdV9uZXh0IiwiZXJyb3IiLCJxaW5pdV9lcnJvciIsImNvbXBsZXRlIiwicWluaXVfY29tIiwicmVzIiwiZXJyIiwibWVzc2FnZSIsIkxpc3RlbkNsaWNrTG9hZFNhdmVFdmVudCIsImluZm9fdGV4dCIsImh0bWwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwic2VydmVyVXJsIiwiZ2V0Q29udGVudCIsImRldGFpbCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibXlzZWxmIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxLQUFPLEdBRVgsU0FBU0MsU0FDTEMsS0FBS0MsT0FBU0MsRUFBRSxXQUNoQkYsS0FBS0csYUFBZUQsRUFBRSxpQkFDdEJGLEtBQUtJLFdBQWFKLEtBQUtHLGFBQWFFLE9BQ3BDTCxLQUFLTSxTQUFXSixFQUFFLG1DQUNsQkYsS0FBS08sVUFBWUwsRUFBRSxvRkFDbkJGLEtBQUtRLFFBQVMsRUFDZFIsS0FBS1MsVUFBWSxHQUNqQlQsS0FBS1UsVUFBWVIsRUFBRSxpQkFDbkJGLEtBQUtXLFdBQWFULEVBQUUsaUNBQ3BCRixLQUFLWSxTQUFXVixFQUFFLGFBQ2xCRixLQUFLYSxTQUFVLEVBQ2ZiLEtBQUtjLFFBQVVaLEVBQUUsc0VBR3JCSCxPQUFPZ0IsVUFBVUMsa0JBQW9CLFdBQ2pDLElBQUlDLEVBQU9qQixLQUNYaUIsRUFBS2hCLE9BQU9pQixNQUFNLFdBRWQsR0FBSUQsRUFBS1QsT0FDTFMsRUFBS2QsYUFBYWdCLFNBQ2RGLEVBQUtYLFVBQ0xXLEVBQUtYLFNBQVNhLFNBRWxCRixFQUFLVixVQUFVYSxZQUFZLGNBQzNCSCxFQUFLVixVQUFVYyxJQUFJSixFQUFLYixZQUN4QkYsRUFBRUYsTUFBTUssS0FBSyxRQUNiWSxFQUFLVCxRQUFTLE1BQ1gsQ0FDSCxJQUFJYyxFQUFVcEIsRUFBRUYsTUFBTXVCLFNBQVNDLFNBQVMsU0FDcENGLEdBQ0FHLFNBQVNDLElBQUksQ0FDVEMsSUFBTyxlQUNQQyxLQUFRLENBQ0pDLE1BQVNQLEVBQVFELE9BRXJCUyxRQUFXLFNB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QkFFakJ0RSxFQUFLSixTQUFVLElBRWZxRSxFQUFVMUQsU0FBU1AsRUFBS0gsU0FBU0ssU0FDakMrRCxFQUFVNUMsT0FBT3JCLEVBQUttRSxHQUFHSSxjQUN6Qi9ELFNBQVNDLElBQUksQ0FDVEMsSUFBTyxrQkFDUEMsS0FBUSxDQUNKNkQsT0FBVXhFLEVBQUttRSxHQUFHSSxjQUV0QjFELFFBQVcsU0FBVUMsR0FDSyxLQUFsQkEsRUFBYSxNQUNiMkQsT0FBT0MsU0FBU0MsWUFNNUJGLE9BQU9DLFNBQVNDLFNBQ2hCM0UsRUFBS0osU0FBVSxNQU8zQlgsRUFBRSxXQUNFLElBQUkyRixFQUFTLElBQUk5RixPQUNqQjhGLEVBQU83RSxvQkFFUDZFLEVBQU9aLDJCQUNQWSxFQUFPakQiLCJmaWxlIjoibXlzZWxmLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB1cmxzID0gXCJcIlxyXG5cclxuZnVuY3Rpb24gTXlTZWxmKCkge1xyXG4gICAgdGhpcy5jaGFuZ2UgPSAkKCcuY2hhbmdlJylcclxuICAgIHRoaXMuaW5wdXRfY2hhbmdlID0gJCgnI2lucHV0LWNoYW5nZScpXHJcbiAgICB0aGlzLnNwYW5fdmFsdWUgPSB0aGlzLmlucHV0X2NoYW5nZS50ZXh0KCk7XHJcbiAgICB0aGlzLnNwYW5fYWRkID0gJCgnPHNwYW4gaWQ9XCJpbnB1dC1jaGFuZ2VcIj48L3NwYW4+Jyk7XHJcbiAgICB0aGlzLmlucHV0X2FkZCA9ICQoJzxpbnB1dCBzdHlsZT1cImJvcmRlci1yYWRpdXM6IDVweDtib3JkZXI6IDFweCBzb2xpZCAjMzJBQUVFOyBwYWRkaW5nLWxlZnQ6IDNweFwiLz4nKTtcclxuICAgIHRoaXMuaXNfYWRkID0gdHJ1ZTtcclxuICAgIHRoaXMuYWRkX3ZhbHVlID0gXCJcIlxyXG4gICAgdGhpcy5pbWdfY2xpY2sgPSAkKCcuaW5mby1pbWcgaW1nJyk7XHJcbiAgICB0aGlzLmlucHV0X2ZpbGUgPSAkKCcuaW5mby1pbWcgaW5wdXRbbmFtZT1cInVwaW1nXCJdJyk7XHJcbiAgICB0aGlzLmJ0bl9sb2FkID0gJCgnLmJ0bi1sb2FkJyk7XHJcbiAgICB0aGlzLmlzX3Nob3cgPSB0cnVlO1xyXG4gICAgdGhpcy51ZWRpdG9yID0gJCgnPHNjcmlwdCBpZD1cImNvbnRhaW5lclwiIG5hbWU9XCJjb250ZW50XCIgdHlwZT1cInRleHQvcGxhaW5cIj48L3NjcmlwdD4nKVxyXG59XHJcblxyXG5NeVNlbGYucHJvdG90eXBlLkxpc3RlbkNoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5jaGFuZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5pc19hZGQpIHtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dF9jaGFuZ2UucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNwYW5fYWRkKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNwYW5fYWRkLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuaW5wdXRfYWRkLmluc2VydEFmdGVyKFwiLmZhbWluZ3lhblwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dF9hZGQudmFsKHNlbGYuc3Bhbl92YWx1ZSk7XHJcbiAgICAgICAgICAgICQodGhpcykudGV4dCgn56Gu5a6a5L+u5pS5Jyk7XHJcbiAgICAgICAgICAgIHNlbGYuaXNfYWRkID0gZmFsc2VcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXRfcyA9ICQodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dF9zKSB7XHJcbiAgICAgICAgICAgICAgICBzdHVfYWpheC5nZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9teXNlbGYvJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogaW5wdXRfcy52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFsnZGF0YSddWyd2YWx1ZSddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF92YWx1ZSA9IHJlc3VsdFsnZGF0YSddWyd2YWx1ZSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X3MucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zcGFuX2FkZC5pbnNlcnRBZnRlcihcIi5mYW1pbmd5YW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3Bhbl9hZGQudGV4dChzZWxmLmFkZF92YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNfYWRkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS50ZXh0KCfmm7TmlLknKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG59O1xyXG5cclxuTXlTZWxmLnByb3RvdHlwZS5MaXN0ZW5DbGlja1Vwb2xvYWRJbWFnZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pbWdfY2xpY2suY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaW5wdXRfZmlsZS5jbGljaygpXHJcbiAgICB9KVxyXG4gICAgc2VsZi5pbnB1dF9maWxlLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcylcclxuICAgICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlcyk7XHJcbiAgICAgICAgc3R1X2FqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1kYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdXJsX3RvID0gcmVzdWx0WydkYXRhJ11bJ3VybCddXHJcbiAgICAgICAgICAgICAgICBzZWxmLmltZ19jbGljay5hdHRyKCdzcmMnLCB1cmxfdG8pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbk15U2VsZi5wcm90b3R5cGUuTGlzdGVuQ2xpY2tVcG9sb2FkSW1hZ2VFdmVudF9RaU5pdSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuaW1nX2NsaWNrLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmlucHV0X2ZpbGUuY2xpY2soKVxyXG4gICAgfSk7XHJcbiAgICBzZWxmLmlucHV0X2ZpbGUuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1kYXRhLmFwcGVuZCgnZmlsZScsIGZpbGVzKTtcclxuICAgICAgICBzdHVfYWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9xaW5pdS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1kYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdXJscyA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm5hbWU6IHJlc3VsdFsnZGF0YSddWydmaWxlbmFtZSddLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFtcImltYWdlL3BuZ1wiLCBcImltYWdlL2pwZWdcIiwgXCJpbWFnZS9naWZcIiwgXCJpbWFnZS9qcGdcIl1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlcywgcmVzdWx0WydkYXRhJ11bJ2ZpbGVuYW1lJ10sIHJlc3VsdFsnZGF0YSddWyd0b2tlbiddLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn56Gu5a6a5L2/55So6L+Z5Liq5aS05YOP5ZCX77yfJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5LiN5aW955yL6L+Y5Y+v5Lul5Zyo6K6+572uJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogJyMzMDg1ZDYnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnIzY2NzQzNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IFwi56Gu5a6a6K6+572uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+eul+S6hu+8ge+8gScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnYnRuIGJ0bi1zdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25DbGFzczogJ2J0biBidG4tZGFuZ2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0dV9hamF4LmdldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX3Fpbml1LycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHsnaXNfc2F2ZSc6IHRydWUsJ3VybCc6dXJsc30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5xaW5pdV9uZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYucWluaXVfZXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbXBsZXRlJzogc2VsZi5xaW5pdV9jb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICflt7Lnu4/orr7nva7vvIEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn5L2g55qE5aS05YOP5bey57uP6KKr6K6+572u44CCJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuTXlTZWxmLnByb3RvdHlwZS5xaW5pdV9uZXh0ID0gZnVuY3Rpb24gKHJlcykge1xyXG5cclxufTtcclxuXHJcbk15U2VsZi5wcm90b3R5cGUucWluaXVfZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSlcclxufTtcclxuTXlTZWxmLnByb3RvdHlwZS5xaW5pdV9jb20gPSBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICQoJy5pbmZvLWltZyBpbWcnKS5hdHRyKCdzcmMnLHVybHMpXHJcbn07XHJcblxyXG5NeVNlbGYucHJvdG90eXBlLkxpc3RlbkNsaWNrTG9hZFNhdmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBpbmZvX3RleHQgPSAkKCcuaW5mby10ZXh0Jyk7XHJcbiAgICB2YXIgdmFsdWUgPSBpbmZvX3RleHQuaHRtbCgpO1xyXG4gICAgc2VsZi5idG5fbG9hZC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNfc2hvdykge1xyXG4gICAgICAgICAgICBpbmZvX3RleHQudGV4dCgnJyk7XHJcbiAgICAgICAgICAgIGluZm9fdGV4dC5hcHBlbmQoc2VsZi51ZWRpdG9yKTtcclxuICAgICAgICAgICAgc2VsZi51ZWRpdG9yLnRleHQodmFsdWUpO1xyXG4gICAgICAgICAgICBzZWxmLnVlID0gVUUuZ2V0RWRpdG9yKCdjb250YWluZXInLCB7XHJcbiAgICAgICAgICAgICAgICAnc2VydmVyVXJsJzogJy9jbXMvZWRpdG9yLydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlbGYuaXNfc2hvdyA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5mb190ZXh0LmNoaWxkcmVuKHNlbGYudWVkaXRvcikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGluZm9fdGV4dC5hcHBlbmQoc2VsZi51ZS5nZXRDb250ZW50KCkpO1xyXG4gICAgICAgICAgICBzdHVfYWpheC5nZXQoe1xyXG4gICAgICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwX2RldGFpbC8nLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RldGFpbCc6IHNlbGYudWUuZ2V0Q29udGVudCgpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBzZWxmLmlzX3Nob3cgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG15c2VsZiA9IG5ldyBNeVNlbGYoKVxyXG4gICAgbXlzZWxmLkxpc3RlbkNoYW5nZUV2ZW50KCk7XHJcbiAgICAvLyBteXNlbGYuTGlzdGVuQ2xpY2tVcG9sb2FkSW1hZ2VFdmVudCgpO1xyXG4gICAgbXlzZWxmLkxpc3RlbkNsaWNrTG9hZFNhdmVFdmVudCgpO1xyXG4gICAgbXlzZWxmLkxpc3RlbkNsaWNrVXBvbG9hZEltYWdlRXZlbnRfUWlOaXUoKTtcclxufSkiXX0=
